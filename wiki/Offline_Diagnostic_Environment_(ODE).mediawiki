---
title: Offline Diagnostic Environment (ODE)
---

Offline Diagnostic Environment (ODE) is a an environment to test HP PARISC or IA64 hardware.<br>
It is usually distributed as ISO image, which contains a LIF image with ISL + ODE binary + other data.<br>
To boot it in qemu, it is sufficient to boot the ISO file.

HP provides some documentation about ODE at 
https://support.hpe.com/connect/s/product?language=en_US&kmpmoid=4284216

== Booting ODE ==
 qemu-system-hppa -boot d -machine ''machine''  -cdrom HP_ODE_CDROM.iso

Make sure to use either B160L or C3700 as ''machine'' parameter since ODE will decide at runtime based on the found machine type which test programs it will enable.

This will boot to ISL:

 HARD Booted.
 
 ISL Revision A.00.44  Mar 12, 2003 
     
    Cannot find an auto-execute file.  AUTOBOOT ABORTED.
  
 ISL>

Typing ode will start the diagnostic environment. It is possible to start a specific test by adding it to ode:

 ODE L2DIAG

will start the PCXL2 CPU tests for the PA7100LC CPU in the B160L.
You will be asked for a password, in qemu it's usually 'quality', but can be 'poultry' or 'saturn' as well.

== L2DIAG ==

 ISL_CMD> l2diag
 
 ***************************************************************************
 ******                                                               ******
 ******                             L2DIAG                            ******
 ******                                                               ******
 ******       Copyright (C) 1995-2000 by Hewlett-Packard Company      ******
 ******                       All Rights Reserved                     ******
 ******                                                               ******
 ******   This program may only be used by HP support personnel and   ******
 ******   those customers with the appropriate Class license or       ******
 ******   Node license for systems specified by the license.  HP      ******
 ******   shall not be liable for any damages resulting from misuse   ******
 ******   or unauthorized use of this program.  This program          ******
 ******   remains the property of HP.                                 ******
 ******                                                               ******
 ******                         Version A.01.13                       ******
 ******                                                               ******
 ***************************************************************************
 
 Type DIAGINFO for test information.
 
 Enter password or a <CR> to exit:
 
 YOUR SELF-MAINTAINER/CHANNEL LICENSE EXPIRES IN  DAYS ON  12/31/9999
 Type HELP for command information.
 
 No other processors logged in.
 UNI-PROCESSOR MODE 
 
 L2DIAG>

diaginfo provides some useful information:

 L2DIAG> diaginfo
 
 L2DIAG is the PCXL2 ODE based diagnostic program.  It is intended
 to test the processor of the various PCXL2 based systems in the offline
 environment.  The program consists of 119 sections, 1/119,
 and are organized into the following groups: 
 
    1.  CPU data path tests, Sections 1/6 (6 sections)
    2.  ICACHE tests, Sections 7/10 (4 sections)
    3.  DCACHE tests, Sections 11/17 (7 sections)
    4.  2nd Level Cache tests, Sections 18/21 (4 sections)
    5.  TLB tests, Sections 22/27 (6 sections)
    6.  CPU instruction tests, Sections 28/76 (49 sections)
    7.  CPU extended tests, Sections 77/88  (12 sections)
    8.  Floating point tests, Sections  89/119 (31 sections)

A test or range of test can be selected by 'section X or section X/Y' where X is the starting test number, and Y the ending test number. If only X is specified, only test X is run.

== Useful ODE tools ==
{| class="wikitable" style="margin:auto'
|+ Tools of interest on the ODE ISO
|-
! Tools !! Description !! Comment
|-
| L2DIAG || PCXL2 PA-7300LC diag || useful for testing 32 bit CPU emulation in qemu (B160L machine)
|-
| UDIAG  || PCX-U PA-8000 diag || useful for testing 64 bit CPU emulation in qemu (C3700 machine)
|-
| WDIAG  || PCX-W PA-8500 diag || useful for testing 64 bit CPU emulation in qemu (C3700 machine)
|-
|}

== Known issues/test failures in '''WDIAG''' ==
{| class="wikitable" style="margin:auto'
|+ Known test failures in '''WDIAG'''
|-
! Section !! Test !! Comment
|-
| 63 || PSW-B bit || Not emulated due to performance reasons
|-
| 65 || dcor || not investigated yet
|-
| 66 || shladd || not investigated yet
|-
| 71 || PSW-X bit || Not emulated due to performance reasons
|-
| 72 || ?? || not investigated yet
|-
| 73  || b,gate || not investigated yet
|-
| 74 || ?? || not investigated yet
|-
| 75 || b,gate || not investigated yet
|-
| 77 || ds || not investigated yet
|-
| 79-86 || TLB? || hangs
|-
|}


== Known issues/test failures in '''L2DIAG''' ==
{| class="wikitable" style="margin:auto'
|+ Known CPU test failures in '''L2DIAG'''
|-
! Section !! Test !! Comment
|-
| 36 || ds/addc || ??? 0x000e185c: ds r0,r25,ret1 / add,c r1,r1,r1
|-
| 40 || depw,cond sar || not investigated yet
|-
| 41 || addi,cond || not investigated yet
|-
| 45 || sub,cond || not investigated yet
|-
| 54 || sub & subi,tsv,cond || not investigated yet
|-
| 56 || uaddcm,tc,nhc || not investigated yet
|-
| 58 || uaddcm & dcor || not investigated yet
|-
| 59 || shladd,cond || not investigated yet
|-
| ... || ...
|}